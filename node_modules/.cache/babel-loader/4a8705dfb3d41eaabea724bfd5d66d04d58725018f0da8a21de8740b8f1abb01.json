{"ast":null,"code":"var _jsxFileName = \"/Users/kimjunhoe/Documents/GitHub/UNTITLED_/src/Component/FeedEdit.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { SessionCurrent } from \"./SessionCurrent\";\nimport axios from \"axios\";\nimport { getServerImgFile } from \"./File\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 10%;\n`;\n_c = Container;\nconst ImgBox = styled.div`\n  width: 100%;\n  height: 400px;\n  border: 1px solid white;\n  display: flex;\n  justify-content: center;\n`;\n_c2 = ImgBox;\nconst Textarea = styled.textarea`\n  width: 100%;\n  padding: 5px;\n  background-color: black;\n  color: white;\n  border: 1px solid white;\n`;\n_c3 = Textarea;\nconst Button = styled.div`\n  background-color: white;\n  color: black;\n  padding: 10px 0;\n  text-align: center;\n  /* width: 100px; */\n  margin: auto;\n  cursor: pointer;\n`;\n_c4 = Button;\nexport function FeedEdit({\n  feed\n}) {\n  _s();\n  console.log(3, feed);\n  const [imageSrc, setImageSrc] = useState(null);\n  const [imageByte, setImageByte] = useState(null);\n  const [imageSendFile, setImageSendFile] = useState(null);\n  const [text, setText] = useState(feed.text);\n  useEffect(() => {\n    console.log(4, feed);\n    if (feed.imageData) {\n      setImageSrc(getServerImgFile(feed.imageData));\n    } else {\n      setImageSrc(feed.image);\n    }\n  }, [feed]);\n  function showFile(file) {\n    if (file) {\n      const imageUrl = URL.createObjectURL(file);\n      setImageSrc(imageUrl);\n    }\n  }\n  function convertImageToBytes(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const arrayBuffer = reader.result;\n        const byteArray = new Uint8Array(arrayBuffer);\n        setImageByte(byteArray);\n        convertBytesToFile(byteArray);\n      };\n      reader.onerror = () => {\n        console.error(\"파일 읽기에 실패했습니다.\");\n      };\n      reader.readAsArrayBuffer(file);\n    }\n  }\n  function convertBytesToFile(byteArray) {\n    const blob = new Blob([byteArray]);\n    const file = new File([blob], \"default_filename.bin\");\n    showFile(file);\n    setImageSendFile(file);\n  }\n  async function editBtnClick() {\n    const formData = new FormData();\n    if (imageSendFile != null) {\n      formData.append(\"file\", imageSendFile);\n    }\n    formData.append(\"id\", feed.id);\n    formData.append(\"text\", text);\n    console.log(1, formData);\n    try {\n      const response = await axios.post(\"http://localhost:8080/api/updateFeed\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      console.log(\"img\", response.data);\n    } catch (error) {\n      console.error(\"요청에 실패했습니다.\", error.response ? error.response.data : error.message);\n    }\n    window.location.href = \"/feed/\" + feed.id;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"50px\",\n          fontWeight: \"bold\",\n          textAlign: \"center\",\n          margin: \"20px 0\"\n        },\n        children: \"\\uD53C\\uB4DC \\uC218\\uC815\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        accept: \"image/*\",\n        onChange: e => {\n          convertImageToBytes(e);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImgBox, {\n        children: imageSrc && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageSrc,\n          alt: \"Selected Image\",\n          style: {\n            maxHeight: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n        id: \"text\",\n        name: \"text\",\n        rows: \"5\",\n        required: true,\n        value: text,\n        placeholder: \"Enter Profile Text\",\n        onChange: e => {\n          setText(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          editBtnClick();\n        },\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(FeedEdit, \"GhnOJ3JJvbcGK/+bQyopMERoySs=\");\n_c5 = FeedEdit;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"ImgBox\");\n$RefreshReg$(_c3, \"Textarea\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"FeedEdit\");","map":{"version":3,"names":["useEffect","useState","styled","SessionCurrent","axios","getServerImgFile","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Container","div","_c","ImgBox","_c2","Textarea","textarea","_c3","Button","_c4","FeedEdit","feed","_s","console","log","imageSrc","setImageSrc","imageByte","setImageByte","imageSendFile","setImageSendFile","text","setText","imageData","image","showFile","file","imageUrl","URL","createObjectURL","convertImageToBytes","event","target","files","reader","FileReader","onload","arrayBuffer","result","byteArray","Uint8Array","convertBytesToFile","onerror","error","readAsArrayBuffer","blob","Blob","File","editBtnClick","formData","FormData","append","id","response","post","headers","data","message","window","location","href","children","style","fontSize","fontWeight","textAlign","margin","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","e","required","src","alt","maxHeight","name","rows","value","placeholder","onClick","_c5","$RefreshReg$"],"sources":["/Users/kimjunhoe/Documents/GitHub/UNTITLED_/src/Component/FeedEdit.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { SessionCurrent } from \"./SessionCurrent\";\nimport axios from \"axios\";\nimport { getServerImgFile } from \"./File\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 10%;\n`;\nconst ImgBox = styled.div`\n  width: 100%;\n  height: 400px;\n  border: 1px solid white;\n  display: flex;\n  justify-content: center;\n`;\nconst Textarea = styled.textarea`\n  width: 100%;\n  padding: 5px;\n  background-color: black;\n  color: white;\n  border: 1px solid white;\n`;\nconst Button = styled.div`\n  background-color: white;\n  color: black;\n  padding: 10px 0;\n  text-align: center;\n  /* width: 100px; */\n  margin: auto;\n  cursor: pointer;\n`;\n\nexport function FeedEdit({ feed }) {\n  console.log(3, feed);\n  const [imageSrc, setImageSrc] = useState(null);\n  const [imageByte, setImageByte] = useState(null);\n  const [imageSendFile, setImageSendFile] = useState(null);\n  const [text, setText] = useState(feed.text);\n\n  useEffect(() => {\n    console.log(4, feed);\n    if (feed.imageData) {\n      setImageSrc(getServerImgFile(feed.imageData));\n    } else {\n      setImageSrc(feed.image);\n    }\n  }, [feed]);\n\n  function showFile(file) {\n    if (file) {\n      const imageUrl = URL.createObjectURL(file);\n      setImageSrc(imageUrl);\n    }\n  }\n\n  function convertImageToBytes(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        const arrayBuffer = reader.result;\n        const byteArray = new Uint8Array(arrayBuffer);\n        setImageByte(byteArray);\n        convertBytesToFile(byteArray);\n      };\n\n      reader.onerror = () => {\n        console.error(\"파일 읽기에 실패했습니다.\");\n      };\n\n      reader.readAsArrayBuffer(file);\n    }\n  }\n\n  function convertBytesToFile(byteArray) {\n    const blob = new Blob([byteArray]);\n    const file = new File([blob], \"default_filename.bin\");\n    showFile(file);\n    setImageSendFile(file);\n  }\n\n  async function editBtnClick() {\n    const formData = new FormData();\n    if (imageSendFile != null) {\n      formData.append(\"file\", imageSendFile);\n    }\n    formData.append(\"id\", feed.id);\n    formData.append(\"text\", text);\n    console.log(1, formData);\n    try {\n      const response = await axios.post(\n        \"http://localhost:8080/api/updateFeed\",\n        formData,\n        {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      );\n      console.log(\"img\", response.data);\n    } catch (error) {\n      console.error(\n        \"요청에 실패했습니다.\",\n        error.response ? error.response.data : error.message\n      );\n    }\n    window.location.href = \"/feed/\" + feed.id;\n  }\n\n  return (\n    <>\n      <Container>\n        <div\n          style={{\n            fontSize: \"50px\",\n            fontWeight: \"bold\",\n            textAlign: \"center\",\n            margin: \"20px 0\",\n          }}\n        >\n          피드 수정\n        </div>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          accept=\"image/*\"\n          onChange={(e) => {\n            convertImageToBytes(e);\n          }}\n          required\n        />\n        <br />\n        <ImgBox>\n          {imageSrc && (\n            <img\n              src={imageSrc}\n              alt=\"Selected Image\"\n              style={{ maxHeight: \"100%\" }}\n            />\n          )}\n        </ImgBox>\n        <Textarea\n          id=\"text\"\n          name=\"text\"\n          rows=\"5\"\n          required\n          value={text}\n          placeholder=\"Enter Profile Text\"\n          onChange={(e) => {\n            setText(e.target.value);\n          }}\n        />\n        <Button\n          onClick={() => {\n            editBtnClick();\n          }}\n        >\n          Edit\n        </Button>\n      </Container>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}